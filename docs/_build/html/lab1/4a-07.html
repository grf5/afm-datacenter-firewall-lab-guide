<!DOCTYPE html>
<head>
  
  <!--STAGING:-->
  <script src="https://assets.adobedtm.com/50164577268f481934e5d57dbfb78f929164cd0d/satelliteLib-ea775cfabef5fca8b04e9392f20c986c0724a7c3-staging.js"></script>
  <!--Production:-->
  <script src="https://assets.adobedtm.com/50164577268f481934e5d57dbfb78f929164cd0d/satelliteLib-ea775cfabef5fca8b04e9392f20c986c0724a7c3.js"></script>
    <title>4.5.7. Test the New Firewall Rules</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="kb_doc_type" content="Manual"/>
  <meta name="kb_doc_type" content="User Guide"/>
  <meta name="title" content="4.5.7. Test the New Firewall Rules"/>
  <meta name="product" content="F5 BIG-IP AFM - The Data Center Firewall Lab"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="None"/>
  <meta name="archived" content="Archived documents excluded"/>

  
  
  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">
 
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script type="text"> jQuery.noConflict(true)</script>

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>4.5.7. Test the New Firewall Rules &#8212; F5 BIG-IP AFM - The Data Center Firewall Lab  documentation</title>
    <link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/f5_agility_theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4.5.8. Creating an Additional Rule List for Additional Services" href="4a-08.html" />
    <link rel="prev" title="4.5.6. Add the Rule List to a Route Domain" href="4a-06.html" />
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="dismiss">
      <button type="button" class="btn btn-info navbar-btn site-hidden"><i class="fa fa-align-justify"></i></button>
    </div>
    <div id="sidebar" class="section-nav">
      <nav class="nav-sidebartoc">
        <h5>F5 BIG-IP AFM - The Data Center Firewall Lab  documentation </h5>
<div id="searchbox" role="search">
  <form class="search" action="../search.html" method="get">
    <input type="text" class="search" name="q" placeholder=" Search..." />
    <button type="submit" class="btn btn-info navbar-btn"><i class="fa fa-search"></i></button>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        <hr>
        <h5>Current Page</h5>
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">4.5.7. Test the New Firewall Rules</a></li>
</ul>

         </span>
        <hr>
        <h5>Site Contents</h5>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro1.html">1. Advanced Firewall Manager - The Data Center Firewall</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro2.html">2. Connecting to the Training Lab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro3.html">3. Ravello Environment Pre-Check</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="intro.html">4. Lab 1 – Advanced Firewall Manager (AFM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab2/intro.html">5. Lab 2 - AFM Packet Tester, Flow Inspector, Stale Rule Lab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab3/intro.html">6. Lab 3 - AFM DDoS Lab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab4/intro.html">7. Lab 4 - Device Management Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab5/intro.html">8. Lab 5 - Network Security (AFM) Management Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lab6/intro.html">9. Lab 6 - iControl REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conclusion.html">10. Conclusion</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>

  
  <div class="main active" id="content">
    <article class="docs-container site-article-inner">
            <nav class="site-breadcrumb-nav site-nav">
          <ul class="site-breadcrumb-list">
            <li class="breadcrumb-item"><button type="button" id="sidebarCollapse" class="btn btn-info navbar-btn site-hidden"><i class="fa fa-align-justify"></i></button>&#x20 <a href="/">Community Training Classes &amp; Labs</a> &gt; <a href="../index.html">F5 BIG-IP AFM - The Data Center Firewall Lab </a> &gt; 4.5.7. Test the New Firewall Rules</li>
          </ul>
      </nav>
      
      

    
  <div class="section" id="test-the-new-firewall-rules">
<h1>4.5.7. Test the New Firewall Rules<a class="headerlink" href="#test-the-new-firewall-rules" title="Permalink to this headline">¶</a></h1>
<p>Once again you will generate traffic through the BIG-IP AFM and then
view the AFM (firewall) logs.</p>
<ul class="simple">
<li>Ping 10.30.0.50</li>
<li>Open a new Web browser and access <a class="reference external" href="http://10.30.0.50">http://10.30.0.50</a></li>
<li>Open a new Web browser and access <a class="reference external" href="http://10.30.0.50:8081">http://10.30.0.50:8081</a></li>
<li>SSH to 10.30.0.50 using Web Server shortcut (PUTTY) on desktop.</li>
</ul>
<p>In the Configuration Utility, open the <strong>Security &gt; Event Logs &gt; Network
&gt; Firewall</strong> page.</p>
<p>Access for port 80 was granted to a host using the web_rule_list:
<strong>allow_http</strong> rule.</p>
<p><a class="reference internal" href="../_images/image21.png"><img alt="image20" src="../_images/image21.png" style="width: 6.49097in; height: 0.70347in;" /></a></p>
<p>Requests for port 8081, and 22 were all rejected due to the
reject_10_20_0_0 rule.</p>
<p><a class="reference internal" href="../_images/image22.png"><img alt="image21" src="../_images/image22.png" style="width: 6.48125in; height: 0.60208in;" /></a></p>
<p>You may verify this, by going to <strong>Security &gt; Network Firewall &gt; Active
Rules</strong>, then selecting the context for route domain 0. Note the
<strong>Count</strong> field next to each rule as seen below. Also note how each rule
will also provide a <strong>Latest Matched</strong> field so you will know the last
time each rule was matched:</p>
<p><a class="reference internal" href="../_images/image23.png"><img alt="image22" src="../_images/image23.png" style="width: 6.49097in; height: 1.76875in;" /></a></p>
<p>Congratulations! Day one and you’ve already saved the day. Hang on,
something isn’t right, the images Mr. Lumbergh talked about are not
populating, they look like broken links.</p>
<p><a class="reference internal" href="../_images/image24.png"><img alt="image23" src="../_images/image24.png" style="width: 2.67327in; height: 2.26704in;" /></a></p>
<p>Let’s refresh the web page once more and see what the logs show….</p>
<p><a class="reference internal" href="../_images/image25.png"><img alt="image24" src="../_images/image25.png" style="width: 6.5in; height: 1.25903in;" /></a></p>
<p>If we follow the flow we can see the traffic to 10.30.0.50 is permitted
on port 80 however; there appears to be a second connection attempting
to open to another server, 10.40.0.50, also on port 80 (glad we put in
that reject rule and are logging all the traffic flows). Let’s look at
how this web page is written. To view the page source details, simply
<strong>right</strong> click anywhere on the <strong>10.30.0.50</strong> web page and select “view
page source”</p>
<p><a class="reference internal" href="../_images/image26.png"><img alt="image25" src="../_images/image26.png" style="width: 6.5in; height: 1.22222in;" /></a></p>
<p>Very interesting, it appears there are two images and they are links to
another server which appear to be a server on the application network,
which is also a link off of the firewall. You can verify this by looking
at the network settings on the BIG-IP found under: <strong>Network &gt; VLANs
and/or Network &gt; Self IPs.</strong> To resolve, let’s create another rule list
for this network as well to keep the rule lists separated for security
reasons.</p>
</div>



    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="4a-06.html" title="4.5.6. Add the Rule List to a Route Domain" accesskey="p" class="btn btn-primary pull-left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="4a-08.html" title="4.5.8. Creating an Additional Rule List for Additional Services" accesskey="n" class="btn btn-primary pull-right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="../_static/js/bootstrap.min.js"></script>
  <script type="text/javascript">
    jQuery.noConflict(true)
  </script>
  <script src="../_static/js/clouddocs.js"></script>
  </body>
</html>